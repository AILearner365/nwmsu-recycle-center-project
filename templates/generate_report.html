{% extends "base.html" %}

{% block content %}
<h2 class="text-center" style="margin-bottom: 2rem;">Generate Report</h2>

<!-- Form for generating report with date range selection -->
<form id="report-form" method="POST" action="/generate-report" style="max-width: 700px; margin: 0 auto;">
    <div class="mb-4">
        <label for="start_date" class="form-label fw-bold">Start Date</label>
        <input type="date" class="form-control" id="start_date" name="start_date" required>
    </div>
    <div class="mb-4">
        <label for="end_date" class="form-label fw-bold">End Date</label>
        <input type="date" class="form-control" id="end_date" name="end_date" required>
    </div>
    <div class="d-flex justify-content-center mt-5 flex-wrap">
        <button type="submit" class="btn btn-secondary btn-wide text-nowrap m-2">Report Summary</button>
        <button type="button" onclick="generatePieChart()" class="btn btn-primary btn-wide text-nowrap m-2">Pie Chart</button>
        <!-- New button to generate monthly graphs -->
        <button type="button" onclick="generateMonthlyGraphs()" class="btn btn-info btn-wide text-nowrap m-2">Monthly Graphs</button>
        <button type="button" onclick="downloadLandfillExpenses()" class="btn btn-warning btn-wide text-nowrap m-2">Landfill Expenses</button>
        <button type="button" onclick="downloadRecyclingRevenue()" class="btn btn-success btn-wide text-nowrap m-2">Recycling Revenue</button>
        <button type="button" onclick="downloadWasteRecords()" class="btn btn-danger btn-wide text-nowrap m-2">Waste Records</button>
    </div>
</form>

<script>
    function generatePieChart() {
        const startDate = document.getElementById("start_date").value;
        const endDate = document.getElementById("end_date").value;
        if (startDate && endDate) {
            window.location.href = `/report/pie-chart?start_date=${startDate}&end_date=${endDate}`;
        } else {
            alert("Please select a start and end date.");
        }
    }

    function generateMonthlyGraphs() {
        const startDate = document.getElementById("start_date").value;
        const endDate = document.getElementById("end_date").value;
        if (startDate && endDate) {
            window.location.href = `/report/monthly-waste-graphs?start_date=${startDate}&end_date=${endDate}`;
        } else {
            alert("Please select a start and end date.");
        }
    }

    function downloadLandfillExpenses() {
        const startDate = document.getElementById("start_date").value;
        const endDate = document.getElementById("end_date").value;
        if (startDate && endDate) {
            window.location.href = `/download-landfill-expenses?start_date=${startDate}&end_date=${endDate}`;
        } else {
            alert("Please select a start and end date.");
        }
    }

    function downloadRecyclingRevenue() {
        const startDate = document.getElementById("start_date").value;
        const endDate = document.getElementById("end_date").value;
        if (startDate && endDate) {
            window.location.href = `/download-recycling-revenue?start_date=${startDate}&end_date=${endDate}`;
        } else {
            alert("Please select a start and end date.");
        }
    }

    function downloadWasteRecords() {
        const startDate = document.getElementById("start_date").value;
        const endDate = document.getElementById("end_date").value;
        if (startDate && endDate) {
            window.location.href = `/download-waste-records?start_date=${startDate}&end_date=${endDate}`;
        } else {
            alert("Please select both start and end dates.");
        }
    }

</script>

<style>
    .btn-wide {
        width: 150px;
        white-space: nowrap;
    }
    .form-control {
        max-width: 700px;
    }
    .mb-4 {
        margin-bottom: 2rem !important;
    }
</style>
{% endblock %}
